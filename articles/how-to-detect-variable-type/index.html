<!DOCTYPE html>
<!-- 
    @author <a href="mailto:leiman0311@gmail.com">Lei Ma</a>
    @time  Aug 2, 2012
-->
<html>
<head>
    <meta charset="utf-8" />
    <title>JavaScript如何判断变量类型 | WebCraft</title>
    <meta name="generator" content="Jekyll" />
    <meta name="author" content="Lei Ma" />
    <meta name="description" content="JavaScript的主要数据类型、变量的传值与传址详解、内存的使用规则（堆和栈）详解、判断变量类型的实现。另外，对于Javascript的类型理解，有的地方还有些模糊，需要多看看权威的文章，加深理解。随着理解的加深，会不断修订。 | malei0311's Blog" />
    <meta name="keywords" content="js,variable,type,malei0311" />
    <!-- <meta name="baidu-tc-verification" content="df5e36c3ee0984287b85c38111c23f84" /> -->
    <link rel="stylesheet" href="/css/default.css" type="text/css" />
    
        <link rel="stylesheet" href="/js/lib/prettify/prettify.css" type="text/css" />
    
    
    <link rel="alternate" type="application/atom+xml" title="Recent Entries" href="/atom.xml" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <script src="/js/lib/jquery-1.7.2.min.js"></script>
</head>
<body>
    <header>
        <div id="header">
            <div class="head-cnt clearfix">
                <div id="logo-bg">
                    <span id="logo-bg-top"></span>
                    <span id="logo-bg-bottom"></span>
                </div>
                <hgroup id="caption">
                    <h1><a href="/">WebCraft</a></h1>
                    <h2>开源有意思，不断学习ing...</h2>
                </hgroup>
                <a href="http://www.w3.org/html/logo/" id="html5-logo">
                    <img src="/images/html5-badge-h-css3-semantics.png" width="165" height="64" title="HTML5 Powered with CSS3 / Styling, and Semantics">
                </a>
            </div> 
        </div>
        <div id="loading-bar">
            <div></div>
        </div>
        <script>
            $('#loading-bar div').animate({width:"15%"},500,"linear");
        </script>
        <nav id="top-nav">
            <div class="head-cnt">
                <ul>
                    <li><a href="/" class="current" rel="nofollow">Home</a></li>
                    <li><a href="/articles.html">Articles</a></li>
                    <li><a href="/tags.html">Tags</a></li>
                    <li><a href="/demos.html" >Demos</a></li>
                    <li><a href="/books.html" >Books</a></li>
                    <li><a href="/links.html" >Links</a></li>
                    <li><a href="/about.html" >About</a></li>
                    <li><a href="/atom.xml" >Rss</a></li>
                </ul>
            </div>
        </nav> 
    </header>
    
    <section id="main">
        <section class="content-cnt">
	<article class="article-main-content">
		<div class="article-title">
            <h1><a href="/articles/how-to-detect-variable-type">JavaScript如何判断变量类型</a></h1>
            <div class="clearfix">
                <div class="article-post-time right">
                    <span>&#8227;</span>
                    <time class="date" pubdate="2012-10-29">2012-10-29</time>
                </div>
                
                <div class="article-tags left">
                    <span class="pure-css-tag">&nbsp;</span>
                    <span class="pure-css-tag-behind left">
                        <ul>
                             
                            <li>
                                <a href="/tags.html#js">
                                    js
                                </a>
                                <span>
                                    ,
                                </span>
                            </li>
                            
                        </ul>
                    </span> 
                </div>
                
            </div>
        </div>
        <p class="description">JavaScript的主要数据类型、变量的传值与传址详解、内存的使用规则（堆和栈）详解、判断变量类型的实现。另外，对于Javascript的类型理解，有的地方还有些模糊，需要多看看权威的文章，加深理解。随着理解的加深，会不断修订。</p>
        <div class="article-div-content">
        	<h2>数据类型</h2>

<h3>简单数据类型</h3>

<p>Boolean,Number,String,Undefined,Null</p>

<h3>复杂数据类型</h3>

<p>Object</p>

<h2>变量的传值与传址</h2>

<h3>按值传递</h3>

<p>简单数据类型是按值进行传递的。当按值传递时，将在计算机内存分配一块空间并将原值复制到其中，这意味着变量的实际内容会传递给变量。然后即使改变原来的值，也不会影响复制到新变量中的值。</p>

<h3>按引用传递</h3>

<p>复杂数据类型，可以包含大量和复杂的信息，所以属于此类型的变量并不包含实际的值，它包含的是对值得引用。这中引用类似于指向变量内容的别名（在一些程序语言中成为“指针”）。当变量需要知道他的值时，该引用会查询内容，然后返回答案，而无需将该值传递给变量。</p>

<p>当多个变量都指向这个复杂的数据类型时，实际上他们获得的只是对这个复杂数据类型的引用。当这个复杂数据类型被改变时，所有引用该复杂数据类型的变量都会获得一个新值。</p>

<pre><code>var theArray=["malei0311","teaScripts"];
var newArray=theArray;
alert(newArray[1]); //teaScripts
theArray[1]="tom";
alert(newArray[1]); //tom
</code></pre>

<h2>内存使用规则</h2>

<p>堆和栈都是运行时内存中分配的一个数据区，因此也被称之为堆区和栈区，但两者存储的数据类型和处理速度不同。</p>

<p>堆 (heap) 用于为复杂数据类型分配空间，例如数组对象、Object对象。他是在运行时动态分配内存的，因此存取速度较慢。</p>

<p>栈 (stack) 主要存放一些基本类型的变量和对象的引用。其优势是存取速度比堆要快，并且栈内的数据可以共享。但缺点是存在栈中的数据大小与生存期必须是确定的，缺乏灵活性。</p>

<h3>栈</h3>

<p>栈有一个很重要的特性，就是存在栈中的数据可以共享。例如：</p>

<pre><code>var a=1;
var b=1;
</code></pre>

<p>JavaScript解释引擎先处理 <code>var a=1;</code> 首先会在栈中创建一个变量为 a 的引用，然后查找栈中是否有 1 这个值，如果没找到 1 ，就将 1 存放进来，然后将 a 指向 1 。接着处理 <code>var b=1;</code> 在创建完 b 的引用变量后，查找栈中是否有 1 这个值，因为在栈中已经存在了，便将 b 直接指向 1 。这样，就出现了 a 与 b 同时指向 1 的情况。</p>

<p>此时，如果再令 <code>a=2</code> 那么 JavaScript解释引擎会重新搜索栈中是否有 2 这个值，如果没有，就将 2 存放进来，并令 a 指向 2 ；如果已经有了，则直接将 a 指向这个地址。因此 a 值得改变不会影响到 b 的值。</p>

<h3>堆</h3>

<p>通过 Array 来看一下堆的行为：</p>

<pre><code>var sport1="basketball";
var sport2="football";
var sport3="volleyball";
var theArray=[sport1,sport2,sport3];
var newArray=theArray;
</code></pre>

<p>当创建数组时，就会在堆内创建一个数组对象，并且在栈内创建一个对数组的引用。这几步操作对应的内存，如图：</p>

<p><img src="/images/articles/how-to-detect-variable-type/stack-heap.png" alt="stack-heap" /></p>

<p>变量 sport1,sport2,sport3 为基本数据类型，他们的值直接放在栈中；theArray,newArray 为复合数据类型，他们的引用变量存储在栈中，指向于存储于堆中的实际对象。</p>

<p>如果更改 newArray 或 theArray 的值，那么实际是更改堆中的实际对象，因此，对两个变量引用都会发生作用。</p>

<p>JavaScript堆不需要程序代码来显示的释放，因为堆是由自动的垃圾回收来负责的，每种浏览器中的JavaScript解释引擎有不同的自动回收方式，但一个基本的原则是，如果栈中不存在对堆中某个对象堆的引用，那么就会认为该对象已经不再需要，在垃圾回收时，就会清除该对象占用的空间。</p>

<p>因此，在不需要时，应该将对对象的引用释放掉，以利于垃圾回收，这样可以提高程序的性能。释放引用最常见的方法：<code>newArray=null;</code></p>

<h2>进入正题</h2>

<h3>测试环境</h3>

<ul>
<li>Chrome 22</li>
<li>Firefox 15</li>
<li>IE 7,8,9</li>
</ul>


<h3>JavaScript类型总览</h3>

<p><img src="/images/articles/how-to-detect-variable-type/types.png" alt="types" /></p>

<h3>简单测试 typeof</h3>

<p>接着<a href="/articles/baidu-examination/" title="百度面试">面试题</a>中的写，简单的测试 typeof</p>

<pre><code>var Tea = (function(){
    function getElementsByClassName(className,tag,parent){}
    function findSymmetryNumber(start,end){}
    function getVarType(v){
        return typeof(v);
    }
    return {
        getElementsByClassName : getElementsByClassName,
        findSymmetryNumber : findSymmetryNumber,
        getVarType : getVarType
    };
})();
</code></pre>

<p>通过在控制台中进行测试，以下是测试结果截图：</p>

<p>Chrome:</p>

<p><img src="/images/articles/how-to-detect-variable-type/typeof-chrome.png" alt="chrome-typeof" /></p>

<p>Firefox:</p>

<p><img src="/images/articles/how-to-detect-variable-type/typeof-firefox.png" alt="firefox-typeof" /></p>

<p>IE:</p>

<p><img src="/images/articles/how-to-detect-variable-type/typeof-ie.png" alt="ie-typeof" /></p>

<p>我们可以看到在 JavaScript 的简单的数据类型中，只有 null 返回的的是 object ，其他的都是相当准确的。</p>

<p>我们知道 "JavaScript一切皆是对象"， 对于除了 Math(静态类) 的内建类，当我们用 new 关键字给变量赋值时， 例如：<code>var oString=new String("test");</code> => <code>typeof oString</code> 返回 object。类似的还有：</p>

<pre><code>var oBoolean=new Boolean(true);
var oNumber=new Number(1234);
var oArray1=new Array();
var oArray2=[];
var re1=new RegExp("\\w*","g");
var re2=/\w*/g;
</code></pre>

<p>返回的都是 "object"，仅用 typeof ，我们无法知道，到底是什么。当然 typeof Math 返回的也是 "object"。但是，直接 <code>typeof 非静态内建类</code> 返回的却是 "function"。</p>

<h3>加入精确判断</h3>

<p>方法一：</p>

<pre><code>function getVarType(v){
    if(typeof v === 'object'){
        if(v === null){return 'null';}
        return Object.prototype.toString.call(v).match(/object\s(\w+)/)[1].toLowerCase();
    }
    return typeof(v);
}
</code></pre>

<p>方法二：</p>

<pre><code>function getVarType(v){
    if(typeof v === 'object'){
        if(v === null){return 'null';}
        if(v.constructor) 
            //直接取出想要的，但是必须多取出一个空格，IE中 "function" 前面并不是空格，
            //所以这就决定了取出的是自己想要的值，然后截取字符串
            //return (v.constructor.toString()).match(/(?: )[\w\$]+/)[0].substr(1).toLowerCase(); 
            //通过获取子表达式，取出自己想要的，因为IE在 "function" 前加了空字符，所以  "^\s*" 
            //return v.constructor.toString().match(/^\s*function\s([\w\$]+)/)[1].toLowerCase(); // [注]
            //match的正则表达式返回第一个匹配，所以 [注] 的 "^\s*" 可以去掉
            return v.constructor.toString().match(/function\s([\w\$]+)/)[1].toLowerCase();
        return "object";
    }
    return typeof(v);
}
</code></pre>

<p>其实，IE在 "function" 前面加的是 "\n" 换行符。</p>

<p>如果说判断某个变量 s 是否为 Array 类型时，可以</p>

<pre><code>if(s instanceof Array){
    //your code
}
</code></pre>

<h2>Reference</h2>

<ul>
<li>《JavaScript权威指南》——张亚飞</li>
<li><a href="http://blog.csdn.net/aimingoo/article/details/6634977" title="再谈JavaScript的数据类型问题">再谈JavaScript的数据类型问题</a> ——aimingoo</li>
</ul>


        </div>
        <div class="share clearfix">
            <em class="share-plain-text">分享到：</em>
            <span class="sina-ico"></span>
            <span class="twitter-ico"></span>
            <span class="google-ico"></span>
            <span class="tencent-ico"></span>
        </div>
        <nav class="article-bottom-nav clearfix">
            
                <a class="left" href="/articles/baidu-examination" rel="bookmark" title="旧一篇">&laquo;&nbsp;XX-web前端开发工程师-笔试+面试-经历</a>
            
            
                <a class="right" href="/articles/css3-linear-gradient" rel="bookmark" title="新一篇">关于 CSS3 的 linear-gradient&nbsp;&raquo;</a>
            
        </nav>
        <div class="clearfix">
            <div id="relatedArticles">
                <h3>相关阅读</h3>
                <ul>
                 
                
                     
                    
                        
                    
                
                     
                    
                        
                    
                
                     
                    
                        
                    
                
                     
                    
                        
                    
                
                     
                    
                        
                            
                                
                                    <li><a href="/articles/web-front-end-test" title="前端测试框架搭建">&raquo;&nbsp;前端测试框架搭建</a></li>
                                
                            
                                
                                    <li><a href="/articles/js-bitwise-operators" title="从 (97 & ~32) == 65 //true 入手js的位操作符">&raquo;&nbsp;从 (97 & ~32) == 65 //true 入手js的位操作符</a></li>
                                
                            
                                
                                    <li><a href="/articles/how-to-detect-variable-type" title="JavaScript如何判断变量类型">&raquo;&nbsp;JavaScript如何判断变量类型</a></li>
                                
                            
                                
                                    <li><a href="/articles/baidu-examination" title="XX-web前端开发工程师-笔试+面试-经历">&raquo;&nbsp;XX-web前端开发工程师-笔试+面试-经历</a></li>
                                
                            
                                
                                    <li><a href="/articles/js-insertAfter" title="insertAfter()?">&raquo;&nbsp;insertAfter()?</a></li>
                                
                            
                                
                                    <li><a href="/articles/java-vs-javascript" title="Java vs JavaScript">&raquo;&nbsp;Java vs JavaScript</a></li>
                                
                            
                                
                                    <li><a href="/articles/3D-jquery" title="JQuery插件之tags的3D旋转球制作">&raquo;&nbsp;JQuery插件之tags的3D旋转球制作</a></li>
                                
                            
                                
                                    <li><a href="/articles/random-color" title="容器透明，内容不透明，随机变色">&raquo;&nbsp;容器透明，内容不透明，随机变色</a></li>
                                
                            
                                
                                    <li><a href="/articles/articlesLayout-directory" title="articlesLayout构建之右侧目录索引">&raquo;&nbsp;articlesLayout构建之右侧目录索引</a></li>
                                
                            
                                
                                    <li><a href="/articles/water-fall-layout" title="Demos界面的伪瀑布流布局的实现">&raquo;&nbsp;Demos界面的伪瀑布流布局的实现</a></li>
                                
                            
                                
                                    <li><a href="/articles/tags-js-liquid" title="Tags界面构建之123">&raquo;&nbsp;Tags界面构建之123</a></li>
                                
                            
                        
                    
                
                     
                    
                        
                    
                
                     
                    
                        
                    
                
                     
                    
                        
                    
                
                     
                    
                        
                    
                
                     
                    
                        
                    
                
                     
                    
                        
                    
                
                     
                    
                        
                    
                
                     
                    
                        
                    
                
                     
                    
                        
                    
                
                     
                    
                        
                    
                
                     
                    
                        
                    
                
                     
                    
                        
                    
                
                     
                    
                        
                    
                
                     
                    
                        
                    
                
                     
                    
                        
                    
                
                     
                    
                        
                    
                
                     
                    
                        
                    
                
                     
                    
                        
                    
                
                     
                    
                        
                    
                
                </ul>
            </div>
            <div id="recentPosts">
                <h3>最新发布</h3>
                <ul>
                   
                    <li>
                        <a href="/articles/install-jdk7-in-ubuntu" title="Install Oracle Java JDK 7 in Ubuntu 13.04" rel="bookmark">&raquo;&nbsp;Install Oracle Java JDK 7 in Ubuntu 13.04</a>
                    </li>                                   
                   
                    <li>
                        <a href="/articles/some-insteresting-terminal-commands" title="Some Interesting Terminal Command in Linux" rel="bookmark">&raquo;&nbsp;Some Interesting Terminal Command in Linux</a>
                    </li>                                   
                   
                    <li>
                        <a href="/articles/a-brief-introduce-to-irc" title="A Brief Introduction to IRC" rel="bookmark">&raquo;&nbsp;A Brief Introduction to IRC</a>
                    </li>                                   
                   
                    <li>
                        <a href="/articles/solve-git-review-problem" title="郁闷的一天 大战 git review" rel="bookmark">&raquo;&nbsp;郁闷的一天 大战 git review</a>
                    </li>                                   
                   
                    <li>
                        <a href="/articles/linux-study-shell-redirect" title="shell 之重定向" rel="bookmark">&raquo;&nbsp;shell 之重定向</a>
                    </li>                                   
                   
                    <li>
                        <a href="/articles/less-vs-sass" title="CSS 预处理器  LESS vs SASS" rel="bookmark">&raquo;&nbsp;CSS 预处理器  LESS vs SASS</a>
                    </li>                                   
                   
                    <li>
                        <a href="/articles/css-camera" title="A pure CSS demo Camera" rel="bookmark">&raquo;&nbsp;A pure CSS demo Camera</a>
                    </li>                                   
                   
                    <li>
                        <a href="/articles/image%27s-usage" title="Image 的用例" rel="bookmark">&raquo;&nbsp;Image 的用例</a>
                    </li>                                   
                   
                    <li>
                        <a href="/articles/css-vertical-align" title="css vertical align" rel="bookmark">&raquo;&nbsp;css vertical align</a>
                    </li>                                   
                   
                    <li>
                        <a href="/articles/background-origin-and-clip" title="background-origin and background-clip" rel="bookmark">&raquo;&nbsp;background-origin and background-clip</a>
                    </li>                                   
                
                </ul>
            </div>
        </div>
        <div>
            <h3>留下一句吧</h3>
            <div id="disqus_thread"></div>
        </div>
	</article>
    <aside id="menuIndex" class="right">
	
	</aside>
</section>

<!--<script>
	$(function(){
		Chocolate.includeScript('/js/lib/prettify/prettify.js',function(){});
		Chocolate.includeScript('/js/articles_layout.js',function(){});
	})
</script>-->
    </section>
    <div class="go-top">
        <a href="#i-will-top" id="go-top" class="clearfix"><span class="go-top-icon"></span></a>
    </div>
    <footer>
        <div class="footer-cnt">
            <section class="chocolate-theme left">
                <p>Powered by <a href="http://jekyllrb.com" target="_blank" rel="nofollow">Jekyll</a>. &lceil;Chocolate&rfloor; is designed by <a href="http://webcraft.malei.tk" rel="nofollow">Lei Ma</a>.</p>
            </section>
            <section class="chocorate-copyright right">
                <p>© 2013 WebCraft All rights reserved.</p>
            </section>
            <a href="https://github.com/malei0311/myBlog" target="_blank" id="forkme">Fork Me</a>
        </div>
    </footer>
    <div id="footer-scripts" class="none">
        <script src="/js/lib/slides.min.jquery.js"></script>
        <script src="/js/chocolate.js"></script>
        
            <script src="/js/lib/prettify/prettify.js"></script>
            <script>
                $(function(){
                    $('pre').addClass('prettyprint linenums'); //添加Google code Hight需要的class
                    prettyPrint();
                    Chocolate.share();
                    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
                    var disqus_shortname = 'webcraftmalei'; /* required: replace example with your forum shortname*/
                    /* * * DON'T EDIT BELOW THIS LINE * * */
                    (function() {
                        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                    })();

                    if($('.article-div-content>h2').length > 2){
                        var h2 = [],h3 = [],tmpl = '<ul>',h2index = 0;
            
                        $.each($('.article-div-content>h2,.article-div-content>h3'),function(index,item){
                            if(item.tagName.toLowerCase() == 'h2'){
                                var h2item = {};
                                h2item.name = $(item).text();
                                h2item.id = 'menuIndex'+index;
                                h2.push(h2item);
                                h2index++;
                            }else{
                                var h3item = {};
                                h3item.name = $(item).text();
                                h3item.id = 'menuIndex'+index;
                                if(!h3[h2index-1]){
                                    h3[h2index-1] = [];
                                }
                                h3[h2index-1].push(h3item);
                            }
                            item.id = 'menuIndex' + index
                        });
            
                        //添加h1
                        tmpl += '<li class="h1"><a href="#" data-top="0">'+$('.article-title>h1').text()+'</a></li>';
            
                        for(var i=0;i<h2.length;i++){
                            tmpl += '<li><a href="#" data-id="'+h2[i].id+'">'+h2[i].name+'</a></li>';
                            if(h3[i]){
                                for(var j=0;j<h3[i].length;j++){
                                    tmpl += '<li class="h3"><a href="#" data-id="'+h3[i][j].id+'">'+h3[i][j].name+'</a></li>';
                                }
                            }
                        }
                        tmpl += '</ul>';
            
                        var $scrollable = Chocolate.findScrollableElement('body','html');
                        // alert($scrollable);
                        // $('body').append('<div id="menuIndex"></div>');
                        $('#menuIndex').append($(tmpl)).delegate('a','click',function(e){
                            e.preventDefault();
                            var scrollNum = $(this).attr('data-top') || $('#'+$(this).attr('data-id')).offset().top;
                            //window.scrollTo(0,scrollNum-30);
                            // $(window).scrollTop(scrollNum-30);
                            // Chocolate.goThere(scrollNum-30,$(window).scrollTop(),0);
                            $scrollable.animate({ scrollTop: scrollNum-30 }, 400, 'swing');
                        })
            
                        $(window).load(function(){
                            var scrollTop = [];
                            $.each($('#menuIndex li a'),function(index,item){
                                if(!$(item).attr('data-top')){
                                    var top = $('#'+$(item).attr('data-id')).offset().top;
                                    scrollTop.push(top);
                                    $(item).attr('data-top',top);
                                }
                            });
                            $(window).bind('scroll',function(){
                                // alert($('body').scrollTop());
                                var nowTop = $(window).scrollTop(),index,length = scrollTop.length;
                                if(nowTop+60 > scrollTop[length-1]){
                                    index = length
                                }else{
                                    for(var i=0;i<length;i++){
                                        if(nowTop+60 <= scrollTop[i]){
                                            index = i;
                                            break;
                                        }
                                    }
                                }
                                $('#menuIndex li').removeClass('on')
                                $('#menuIndex li').eq(index).addClass('on')
                            });
                        });
            
                        // //用js计算屏幕的高度
                        // $('#menuIndex').css('max-height',$(window).height()-140);
                    }
                });
                $(function() {
                    // $(window).bind("scroll", function(){
                    //     var menuIndex_scrHeight = $(window).scrollTop(),menuIndex_topHeight;
                    //     if(menuIndex_scrHeight > 140 && ($(window).height()-60)>$('#menuIndex').height()) {
                    //         menuIndex_topHeight = menuIndex_scrHeight-140;
                    //         $('#menuIndex').animate({top: menuIndex_topHeight},10);
                    //     } 
                    //     else{
                    //         $('#menuIndex').animate({top: 0},10);
                    //     }
                    // });
                    $(window).bind("scroll", function(){
                        var menuIndex_scrHeight = $(window).scrollTop(),menuIndex_topHeight;
                        var footerOffsetTop=$('footer').offset().top;
                        if(menuIndex_scrHeight > 140 && menuIndex_scrHeight<(footerOffsetTop-$('#menuIndex').height()) && $(window).height()>$('#menuIndex').height()) {
                            menuIndex_topHeight = menuIndex_scrHeight-140;
                            $('#menuIndex').animate({top: menuIndex_topHeight},10);
                        } 
                        else{
                            $('#menuIndex').animate({top: 0},10);
                        }
                    });
                });
                $(function(){ 
                    var originArticles=$('#relatedArticles ul li');
                    for(var i=0;i<originArticles.length-1;i++){
                        for(var j=i+1;j<originArticles.length;j++){
                            if(originArticles.eq(i).children('a').attr('href') == originArticles.eq(j).children('a').attr('href')){
                                originArticles.eq(j).remove();
                            }
                        }
                    }
                    var secondArticles=$('#relatedArticles ul li');
                    for(var i=0;i<secondArticles.length;i++){
                        if(secondArticles.length == 1){
                            $('#relatedArticles ul').html("<li>&raquo;&nbsp;悲剧了，与之相关的文章还没生出来呢</li>");
                        }
                        if(secondArticles.eq(i).children('a').attr('href') == $('div.article-title>h1>a').attr('href')){
                            secondArticles.eq(i).remove();
                        }
                    }
                    var thirdArticles=$('#relatedArticles ul li');
                    if(thirdArticles.length > 10){
                        for(var i=10;i<thirdArticles.length;i++){
                            thirdArticles.eq(i).remove();
                        }
                    }
                    // alert(originArticles.length+" "+secondArticles.length+" "+thirdArticles.length);
                    
                })
            </script>
            
        
        
        
        
        
        
        
        <script>
            $(function(){
                $('#main').css('min-height',$(window).height()-196);
                $('#loading-bar div').animate({width:"100%"},200,"swing"); 
                var scrHeight, topId;
                topId = $("#go-top");
                $(window).bind("scroll", function(){
                    scrHeight = $(window).scrollTop();
                    if(scrHeight > 500) {
                        topId.css('display','block');
                        topId.fadeIn(1500);
                    } else {
                        topId.fadeOut(1500);
                    }
                });
                topId.click(function() {
                    // $('body, html').animate({scrollTop: 0}, 1200);
                    Chocolate.goTop();
                });   
            });      
        </script>
    </div>
</body>
</html>
